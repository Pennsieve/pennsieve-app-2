<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>bf-query-builder-title test</title>

    <script src="../../../../../../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../../../../../../bower_components/web-component-tester/browser.js"></script>

    <link rel="import" href="../bf-query-builder-title.html">
  </head>
  <body>

    <test-fixture id="basic">
      <template is="dom-template">
        <bf-query-builder-title></bf-query-builder-title>
      </template>
    </test-fixture>

    <script>
      suite('basic', () => {
        let basic;

        setup(() => {
          basic = fixture('basic');
        });

        test('Instantiating the element works', () => {
          assert.equal(basic.is, 'bf-query-builder-title');
          expect(basic.queryTitle).to.equal('Default Title');
        });

        test('Clicking the rename link will toggle the editing feature', (done) => {
          expect(basic._isEditing).to.be.false;
          flush(() => {
            Polymer.dom(basic.root).querySelector('#renameLink').click();
            expect(basic._isEditing).to.be.true;
            done();
          });
        });

        test('Handles rename-concept-query event', (done) => {
          basic.addEventListener('rename-concept-query', (evt) => {
            expect(evt.detail.title).to.equal(basic.queryTitle);
            expect(basic._isEditing).to.be.false;
            done();
          });
          flush(() => {
            Polymer.dom(basic.root).querySelector('#saveLink').click();
          });
        });
      });
    </script>

  </body>
</html>
