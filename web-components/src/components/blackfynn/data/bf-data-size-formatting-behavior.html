<link rel="import" href="../../../../bower_components/polymer/polymer.html">

<link rel="import" href="../../../vendor-scripts.html">
<script>
  window.Blackfynn = window.Blackfynn || {};
  /**
  * @polymerBehavior
  */

  Blackfynn.DataSizeFormattingBehavior = {
      /**
       * rounds to two decimal places
       * @param {Number} dividend
       * @param {Number} divisor
       * @returns {Number|Float}
       */
      _round2: function(dividend, divisor) {
        return Math.round(dividend / divisor * 100) / 100;
      },

      /**
       * converts raw metric data value to appropriate unit of bytes, kb, or mb
       * @param {String} storage
       * @returns {String}
       */
      _convertMetric: function(storage) {
        if (!storage || storage <= 0) {
          return String.fromCharCode(8212);
        }

        const kb = 1e3;
        const mb = 1e6;
        const gb = 1e9;
        const tb = 1e12;
        const metric = parseFloat(storage, 10);

        if (metric < kb) {
          return `${metric} B`;
        } else if (metric >= kb && metric < mb) {
          return `${this._round2(metric, kb)} KB`;
        } else if (metric >= mb && metric < gb) {
          return `${this._round2(metric, mb)} MB`;
        } else if (metric >= gb && metric < tb) {
          return `${this._round2(metric, gb)} GB`;
        } else {
          return `${this._round2(metric, tb)} TB`;
        }
      },
 }
</script>
