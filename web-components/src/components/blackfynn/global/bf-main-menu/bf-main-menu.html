<link rel="import" href="../../../../../bower_components/polymer/polymer.html">

<link rel="import" href="../../state/bf-state-aware-behavior.html">
<link rel="import" href="../../shared/feature-flag-behavior.html">

<link rel="import" href="../../../../styles/blackfynn/main.html">

<!--
`<bf-main-menu>` is a global component for the main menu of the Blackfynn app.

    <bf-main-menu></bf-main-menu>

-->
<dom-module id="bf-main-menu">

  <template>
    <style include="blackfynn-main-styles"></style>
    <style type="text/css">
      :host {
        display: block;
      }
      .link {
        color: #4A4A4A;
        display: inline-block;
        font-family: 'SharpSans', sans-serif;
        font-weight: 700;
        font-size: 13px;
        margin-left: 20px;
        text-decoration: none;
      }
      .link[active], .link:focus, .link:hover {
        color: var(--app-primary-color);
      }
      .link.first {
        margin-left: 0;
      }
    </style>

    <a class="link first" href="[[_computeUrl(state.activeOrganization.organization.id, 'data-catalog')]]" active$="[[_computeIsSelected('data-catalog', state.appView)]]">Data Catalog</a>
    <a class="link" href="[[_computeUrl(state.activeOrganization.organization.id, 'explore/main')]]" active$="[[_computeIsSelected('explore', state.appView)]]" hidden$="[[!_hasConceptsFeature]]">Explore</a>

  </template>

  <script>
    Polymer({
      is: 'bf-main-menu',

      behaviors: [
        StateAwareBehavior,
        Blackfynn.FeatureFlag
      ],

      properties: {
        /**
         * Compute if the user has the concepts feature flag
         */
        _hasConceptsFeature: {
          type: Boolean,
          value: false,
          computed: `hasFeature('concepts_feature', state.activeOrganization.organization.features)`
        }
      },

      /**
       * Compute URL based on active organization ID and path
       * @param {String} orgId
       * @param {String} path
       * @returns {String}
       */
      _computeUrl: function(orgId, path) {
        return `/${orgId}/${path}`;
      },

      /**
       * Compute if the menu item is selected
       * @param {string} menuItem
       * @param {string} appView
       */
      _computeIsSelected: function(menuItem, appView) {
        return menuItem === appView;
      }
    });

  </script>

</dom-module>
