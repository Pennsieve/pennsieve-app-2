<link rel="import" href="../../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../state/bf-state-aware-behavior.html">

<link rel="import" href="../../../../styles/blackfynn/main.html">
<link rel="import" href="../../../../styles/blackfynn/explore.html">

<!--
## bf-concepts-list

`<bf-concepts-list>` is a component for displaying the list of concepts for an organization.

@element bf-concepts-list
@demo demo/index.html
-->

<dom-module id="bf-concepts-list">

  <template>

    <style include="blackfynn-main-styles"></style>
    <style include="bf-explore-styles"></style>
    <style>
      :host {
        display: block;
        max-width: 300px;
        overflow: hidden;
      }
      .concept-item {
        margin-bottom: 10px;
        @apply(--layout-horizontal);
      }
      .concept-item--name {
        @apply(--layout-flex);
      }
      .concept-item--count {
        text-align: right;
      }
    </style>

    <h2>Browse by Concept</h2>

    <template is="dom-repeat" items="[[concepts]]">
      <div class="concept-item">
        <div class="concept-item--name">
          <a href="[[_computeConceptUrl(state.activeOrganization.organization.id, item.id)]]">[[item.name]]</a>
        </div>
        <div class="concept-item--count">[[_computeCount(item.count)]]</div>
      </div>
    </template>

  </template>

  <script>

    Polymer({
      is: 'bf-concepts-list',

      behaviors: [
        StateAwareBehavior
      ],

      properties: {
        /**
         * list of concepts
         */
        concepts: {
          type: Array,
          value: function() {
            return [];
          }
        },
      },

      /**
      * Computes concept url
      * @param {String} path
      * @param {Object} itemId
      */
      _computeConceptUrl: function(activeOrgId, itemId) {
        return `/${activeOrgId}/explore/concept/${itemId}`;
      },

      /**
       * Compute count, defaulting to 0
       * @param {number} count
       * @returns {String}
       */
      _computeCount: R.defaultTo(0)
    });

  </script>

</dom-module>
