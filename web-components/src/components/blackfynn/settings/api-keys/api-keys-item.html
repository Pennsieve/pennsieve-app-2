<link rel="import" href="../../../../../bower_components/polymer/polymer.html">

<link rel="import" href="../../../../styles/blackfynn/main.html">
<link rel="import" href="../../../../styles/blackfynn/icons.html">
<link rel="import" href="../../../../vendor-scripts.html">

<!--
api-keys-item
Component that displays individual API keys for a specific user within an organization.

@element api-keys-item
-->
<dom-module id="api-keys-item">
  <template>
    <style include="blackfynn-main-styles"></style>
    <style>
      :host {
        border-bottom: 1px solid var(--cortex);
        display: block;
      }
      :host([:first-of-type]) {
        border-top: 1px solid var(--cortex);
      }
      .api-key-remove-icon {
        color: var(--glial);
        cursor: pointer;
        height: 12px;
        margin-left: 10px;
        width: 12px;
      }
      .api-key-remove-icon:hover {
        opacity: .8;
      }
      .api-key-wrap {
        color: var(--glial);
        padding: 15px 20px;
        @apply(--layout-horizontal);
        @apply(--layout-center);
      }
      .api-key-info {
        @apply(--layout-vertical);
        @apply(--layout-flex);
      }
      .api-key-name {
        color: var(--text-color);
        font-weight: 500;
      }
    </style>

    <div class="api-key-wrap">
      <div class="api-key-info">
        <div class="api-key-name">[[key.name]]</div>
        <div class="api-key-last-used">[[_formatDateTime(key.lastUsed)]]</div>
      </div>
      <iron-icon class="api-key-remove-icon" icon="blackfynn:close_x" on-tap="_removeApiKey"></iron-icon>
    </div>
  </template>

  <script>
    Polymer({
      is: 'api-keys-item',

      properties: {
        /**
         * api key object
         */
        key: {
          type: Object,
          value: function() {
            return {};
          }
        },
      },

      /**
       * open a delete confirmation window
       */
      _removeApiKey: function() {
        this.fire('open-remove-api-key', this.key);
      },

      /**
       * formats date and time
       * @param {String} dt
       * @returns {String}
       */
      _formatDateTime: function(dt) {
        return dt ? moment(dt).format('MMMM Do YYYY, h:mm:ss a') : '';
      },

    });
  </script>
</dom-module>
