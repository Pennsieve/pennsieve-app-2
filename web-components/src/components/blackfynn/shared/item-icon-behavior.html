<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../vendor-scripts.html">

<link rel="import" href="./get-file-property.html">

<script>
  window.Blackfynn = window.Blackfynn || {};
  /**
  * @polymerBehavior
  */
  Blackfynn.ItemIconBhv = {
    properties: {
      files: {
        type: Array,
        value: function() {
          return [
            {'Icon':'AdobeIllustrator', 'SVG':'icon-vector.svg'},
            {'Icon':'ClinicalImageBrain', 'SVG':'icon-clinical.svg'},
            {'Icon':'Code', 'SVG':'icon-code.svg'},
            {'Icon':'Docker', 'SVG':'icon-docker.svg'},
            {'Icon':'Excel', 'SVG':'icon-excel.svg'},
            {'Icon':'Flow', 'SVG':'icon-generic.svg'},
            {'Icon':'Generic', 'SVG':'icon-generic.svg'},
            {'Icon':'Generic Data', 'SVG':'icon-generic.svg'},
            {'Icon':'Genomics', 'SVG':'icon-genomics.svg'},
            {'Icon':'GenomicsVariant', 'SVG':'icon-genomics.svg'},
            {'Icon':'HDF', 'SVG':'icon-generic.svg'},
            {'Icon':'Image', 'SVG':'icon-image.svg'},
            {'Icon':'JSON', 'SVG':'icon-code.svg'},
            {'Icon':'Matlab', 'SVG':'icon-matlab.svg'},
            {'Icon':'Microscope', 'SVG':'icon-microscope.svg'},
            {'Icon':'Model', 'SVG':'icon-3d.svg'},
            {'Icon':'NWB', 'SVG':'icon-generic.svg'},
            {'Icon':'Notebook', 'SVG':'icon-notebook.svg'},
            {'Icon':'PDF', 'SVG':'icon-acrobat.svg'},
            {'Icon':'Powerpoint', 'SVG':'icon-powerpoint.svg'},
            {'Icon':'RData', 'SVG':'icon-r.svg'},
            {'Icon':'Tabular', 'SVG':'icon-tabular.svg'},
            {'Icon':'Text', 'SVG':'icon-text.svg'},
            {'Icon':'Timeseries', 'SVG':'icon-timeseries.svg'},
            {'Icon':'Video', 'SVG':'icon-video.svg'},
            {'Icon':'Word', 'SVG':'icon-word.svg'},
            {'Icon':'XML', 'SVG':'icon-code.svg'},
            {'Icon':'Zip', 'SVG':'icon-zip.svg'}
          ]
        }
      }
    },

    getSvgIcon: R.compose(
      R.concat('/static/file-icons/'),
      R.propOr('icon-generic.svg', 'SVG'),
      R.useWith(R.find, [R.propEq('Icon')], R.defaultTo({}))
    ),

    // Compute what the icon should be
    _computeIcon: function(data) {
      let icon = R.propOr('', 'icon', data) // backwards compatibility
      const props = R.propOr([], 'properties', data)
      if (!icon && props.length) {
        icon = this.getFilePropertyVal(props, 'icon')
      }
      const packageType = R.pathOr('', ['content', 'packageType'], data)
      if (packageType === 'Collection') {
        return '/static/file-icons/icon-folder.svg';
      }
      return this.getSvgIcon(icon, this.files);
    }
  }

  /**
  * @polymerBehavior
  */
  Blackfynn.ItemIconBehavior = [
    Blackfynn.ItemIconBhv,
    Blackfynn.GetFilePropertyBehavior
  ]
</script>
