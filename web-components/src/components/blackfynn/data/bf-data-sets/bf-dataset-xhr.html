<link rel="import" href="../../../../../bower_components/polymer/polymer.html">

<link rel="import" href="../../../../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../../shared/bf-logger/bf-logger-behavior.html">

<!--
## bf-dataset-xhr

`<bf-dataset-xhr>` wrapper for iron-ajax to handle xhr operations for datasets.

The main difference in using`bf-dataset-xhr` is that you need to programmatically handle the Promise success and error conditions returned
by `iron-ajax` vs passing in `on-response` and `on-error` functions to the component.

@element bf-dataset-xhr
-->
<dom-module id="bf-dataset-xhr">
  <template>
    <iron-ajax
      id="xhr"
      method="[[method]]"
      headers="[[headers]]"
      content-type="application/json"
      handle-as="json"
      body="[[body]]"
      url="[[url]]"></iron-ajax>
  </template>
  <script>
    Polymer({
      is: 'bf-dataset-xhr',

      behaviors: [
        Blackfynn.LoggerBehavior
      ],

      properties: {
        // XHR endpoint to call
        url: String,
        // HTTP methods
        method: {
          type: String,
          value: 'GET'
        },
        // XHR header
        headers: {
          type: Object,
          value: function() {
            return {};
          }
        },
        // XHR body
        body: {
          type: Object,
          value: function() {
            return {}
          }
        }
      },

      /**
        * submits iron-ajax request if component properties are valid
        * otherwise, logs an error to the console
        */
      generateRequest: function() {
        return this.url ? this.$.xhr.generateRequest() : this.logger('Missing "url" property.', 'error');
      },

    });
  </script>
</dom-module>
